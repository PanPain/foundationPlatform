<!DOCTYPE html>

<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta charset="utf-8" />
  <title> Ace Admin</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

  <!-- bootstrap & fontawesome -->
  <link rel="stylesheet" href="../assets/css/bootstrap.css" />
  <link rel="stylesheet" href="../assets/css/font-awesome.css" />
  <link rel="stylesheet" href="../assets/css/jquery-ui.css">
  <!-- page specific plugin styles -->

  <!-- text fonts -->
  <link rel="stylesheet" href="../assets/css/ace-fonts.css" />

  <!-- ace styles -->
  <link rel="stylesheet" href="../assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />

  <!--[if lte IE 9]>
  <link rel="stylesheet" href="../assets/css/ace-part2.css" class="ace-main-stylesheet"/>
  <![endif]-->

  <!--[if lte IE 9]>
  <link rel="stylesheet" href="../assets/css/ace-ie.css"/>
  <![endif]-->

  <!-- inline styles related to this page -->

  <!-- ace settings handler -->
  <script src="../assets/js/ace-extra.js"></script>

  <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

  <!--[if lte IE 8]>
  <script src="../assets/js/html5shiv.js"></script>
  <script src="../assets/js/respond.js"></script>
  <![endif]-->
</head>

<body class="no-skin">
  <!-- #section:basics/navbar.layout -->
  <div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
      try {
        ace.settings.check('navbar', 'fixed')
      } catch (e) {
      }
    </script>

    <div class="navbar-container" id="navbar-container">
      <!-- #section:basics/sidebar.mobile.toggle -->
      <!-- <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
        <span class="sr-only">Toggle sidebar</span>

        <span class="icon-bar"></span>

        <span class="icon-bar"></span>

        <span class="icon-bar"></span>
    </button> -->

      <!-- /section:basics/sidebar.mobile.toggle -->
      <div class="navbar-header pull-left">
        <!-- #section:basics/navbar.layout.brand -->
        <a href="#" class="navbar-brand">
          <small>
            <i class="fa fa-flag"></i>
            公共场所无线上网安全管控系统
          </small>
        </a>

        <!-- /section:basics/navbar.layout.brand -->

        <!-- #section:basics/navbar.toggle -->

        <!-- /section:basics/navbar.toggle -->
      </div>

      <!-- #section:basics/navbar.dropdown -->
      <div class="navbar-buttons navbar-header pull-right" role="navigation">
        <ul class="nav ace-nav">

          <li class="purple">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
              <i class="ace-icon fa fa-bell icon-animated-bell"></i>
              <span class="badge badge-important">8</span>
            </a>

            <ul class="dropdown-menu-right dropdown-navbar navbar-pink dropdown-menu dropdown-caret dropdown-close">
              <li class="dropdown-header">
                <i class="ace-icon fa fa-exclamation-triangle"></i>
                8 Notifications
              </li>

              <li class="dropdown-content">
                <ul class="dropdown-menu dropdown-navbar navbar-pink">
                  <li>
                    <a href="#">
                      <div class="clearfix">
                        <span class="pull-left">
                          <i class="btn btn-xs no-hover btn-pink fa fa-comment"></i>
                          New Comments
                        </span>
                        <span class="pull-right badge badge-info">+12</span>
                      </div>
                    </a>
                  </li>
                </ul>
              </li>

              <li class="dropdown-footer">
                <a href="#">
                  See all notifications
                  <i class="ace-icon fa fa-arrow-right"></i>
                </a>
              </li>
            </ul>
          </li>

          <li class="green">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
              <i class="ace-icon fa fa-envelope icon-animated-vertical"></i>
              <span class="badge badge-success">5</span>
            </a>

            <ul class="dropdown-menu-right dropdown-navbar dropdown-menu dropdown-caret dropdown-close">
              <li class="dropdown-header">
                <i class="ace-icon fa fa-envelope-o"></i>
                5 Messages
              </li>

              <li class="dropdown-content">
                <ul class="dropdown-menu dropdown-navbar">
                  <li>
                    <a href="#" class="clearfix">
                      <img src="../assets/avatars/avatar.png" class="msg-photo" alt="Alex's Avatar" />
                      <span class="msg-body">
                        <span class="msg-title">
                          <span class="blue">Alex:</span>
                          Message Summary
                        </span>

                        <span class="msg-time">
                          <i class="ace-icon fa fa-clock-o"></i>
                          <span>Message Time</span>
                        </span>
                      </span>
                    </a>
                  </li>
                </ul>
              </li>

              <li class="dropdown-footer">
                <a href="javascript:;">
                  See all messages
                  <i class="ace-icon fa fa-arrow-right"></i>
                </a>
              </li>
            </ul>
          </li>

          <!-- #section:basics/navbar.user_menu -->
          <li class="light-blue">
            <a data-toggle="dropdown" href="#" class="dropdown-toggle">
              <img class="nav-user-photo" src="../assets/avatars/myAvatar.jpg" alt="Stanny's Photo" />
              <span class="user-info">
                <small>Welcome,</small>
                Stanny
              </span>

              <i class="ace-icon fa fa-caret-down"></i>
            </a>

            <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-closer">
              <li>
                <a href="#">
                  <i class="ace-icon fa fa-cog"></i>
                  Settings
                </a>
              </li>

              <li class="divider"></li>

              <li>
                <a href="#">
                  <i class="ace-icon fa fa-power-off"></i>
                  Logout
                </a>
              </li>
            </ul>
          </li>

          <!-- /section:basics/navbar.user_menu -->
        </ul>
      </div>

      <!-- /section:basics/navbar.dropdown -->
    </div>
    <!-- /.navbar-container -->
  </div>

  <div class="main-container" id="main-container">
    <!-- #section:basics/sidebar -->
    <div id="sidebar" class="sidebar responsive">
      <script type="text/javascript">
        try {
          ace.settings.check('sidebar', 'fixed')
        } catch (e) {
        }
      </script>

      <ul class="nav nav-list">
        <li class="">
          <a href="#">
            <i class="menu-icon fa fa-home"></i>
            <span class="menu-text"> 首页 </span>
          </a>

          <b class="arrow"></b>
        </li>

        <li class="">
          <a href="#">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text"> 运维统计 </span>
          </a>

          <b class="arrow"></b>
        </li>

        <li class="">
          <a href="#" class="dropdown-toggle">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text"> 研判分析 </span>

            <b class="arrow fa fa-angle-down"></b>
          </a>

          <b class="arrow"></b>
          <ul class="submenu">
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                轨迹查询
              </a>

              <b class="arrow"></b>
            </li>

          </ul>
        </li>

        <li class="">
          <a href="#" class="dropdown-toggle">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text"> 布控管理 </span>

            <b class="arrow fa fa-angle-down"></b>
          </a>

          <b class="arrow"></b>
          <ul class="submenu">
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                布控设置
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                布控告警
              </a>

              <b class="arrow"></b>
            </li>
          </ul>
        </li>

        <li class="">
          <a href="#" class="dropdown-toggle">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text"> 采集记录查询 </span>

            <b class="arrow fa fa-angle-down"></b>
          </a>

          <b class="arrow"></b>
          <ul class="submenu">
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                移动终端查询
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                上网日志查询
              </a>

              <b class="arrow"></b>
            </li>
          </ul>
        </li>

        <li class="">
          <a href="#" class="dropdown-toggle">
            <i class="menu-icon fa fa-desktop"></i>
            <span class="menu-text"> 统计报表 </span>

            <b class="arrow fa fa-angle-down"></b>
          </a>

          <b class="arrow"></b>
          <ul class="submenu">
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                设备状态统计
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                虚拟身份统计
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                设备采集量统计
              </a>

              <b class="arrow"></b>
            </li>
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                安全厂商统计
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                场所采集量统计
              </a>

              <b class="arrow"></b>
            </li>
            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                场所统计
              </a>

              <b class="arrow"></b>
            </li>

            <li class="">
              <a href="#">
                <i class="menu-icon fa fa-caret-right"></i>
                场所设备统计
              </a>

              <b class="arrow"></b>
            </li>
          </ul>
        </li>
      </ul>
      <!-- /.nav-list -->

      <!-- #section:basics/sidebar.layout.minimize -->
      <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
        <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
      </div>

      <!-- /section:basics/sidebar.layout.minimize -->
      <script type="text/javascript">
        try {
          ace.settings.check('sidebar', 'collapsed')
        } catch (e) {
        }
      </script>
    </div>

    <!-- /section:basics/sidebar -->
    <div class="main-content" id="placeinfo-table">
      <div class="top-title" style="background:lemonchiffon;height: 40px; border-bottom:solid 2px lightskyblue ">
        // 这里是放 title 的部分
      </div>
      <div id="simple-table" class="page-content" style="background: whitesmoke">

        <!-- PAGE CONTENT BEGINS -->
        <div class="placeinfo-query" style="margin-bottom: 50px">
          <label>场所名称
            <input type="text" v-model="queryCondition.placeName">
          </label>
          <button class="btn btn-success" @click="queryPlaceinfo(queryCondition)"> 查询</button>
          <button class="btn btn-success" @click="addItem()">新增</button>
          <br>
          <label>场所编码
            <input type="text" v-model="queryCondition.placeNo"> </label>
          <label>场所地址
            <input type="text" v-model="queryCondition.address"> </label>
          <label>服务类型
            <input type="text" v-model="queryCondition.type"> </label>
          <br>
          <label>经营性质
            <input type="text" v-model="queryCondition.property"> </label>

          <label>经营法人
            <input type="text" v-model="queryCondition.legalPerson"> </label>
          <label>场所组织结构代码
            <input type="text" v-model="queryCondition.orgCode"> </label>
        </div>

        <div class="placeinfo-table">
          <table class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th class="center">
                  <label class="pos-rel">
                    <input type="checkbox" class="ace" />
                    <span class="lbl"></span>
                  </label>
                </th>
                <th>序号</th>
                <th>场所名称</th>
                <th>场所编码</th>
                <th class="hidden-480">场所详细地址</th>

                <th>
                  <i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
                  经度坐标
                </th>
                <th class="hidden-480">纬度坐标</th>

                <th></th>
              </tr>
            </thead>

            <tbody>
              <tr v-for="item in list">
                <td class="center">
                  <label class="pos-rel">
                    <input type="checkbox" class="ace" />
                    <span class="lbl"></span>
                  </label>
                </td>
                <td>
                  {{item.placeNo}}
                </td>
                <td>{{item.placeName}}</td>
                <td>
                  {{item.orgCode}}
                </td>
                <td>
                  {{item.address}}
                </td>

                <td>
                  {{item.longitude}}
                </td>

                <td class="hidden-480">
                  {{item.latitude}}
                </td>

                <td>
                  <div class="hidden-sm hidden-xs btn-group">

                    <button class="btn btn-xs btn-info">
                      <i class="ace-icon fa fa-pencil bigger-120"></i>
                    </button>

                    <button class="btn btn-xs btn-danger">
                      <i class="ace-icon fa fa-trash-o bigger-120"></i>
                    </button>
                  </div>
                </td>
              </tr>

            </tbody>
          </table>
          <div id="dialogDiv">

            <div class="dialog-content">

            </div>
          </div>


        </div>


        <!-- PAGE CONTENT ENDS -->

        <!-- /.row -->
      </div>
      <!-- /.page-content -->
    </div>
    <!-- /.main-content -->
  </div>


  <!--[if !IE]> -->

  <script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery.js'>" + "<" + "/script>");
  </script>

  <!-- <![endif]-->

  <!--[if IE]>
<script type="text/javascript">
  window.jQuery || document.write("<script src='../assets/js/jquery1x.js'>" + "<" + "/script>");
</script>
<![endif]-->
  <script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.js'>" + "<" + "/script>");
  </script>
  <script src="../assets/js/bootstrap.js"></script>

  <!-- page specific plugin scripts -->

  <script src="../assets/js/jquery-ui.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script>
    var vm = new Vue({
      el: "#placeinfo-table",
      data: {
        queryCondition: {
          placeName: "",
          placeNo: "",
          address: "",
          type: "",
          property: "",
          legalPerson: "",
          orgCode: ""
        },
        list: [
          {
            "placeId": 1,
            "placeName": "原始数据",
            "placeNo": "111",
            "address": "123",
            "longitude": "12",
            "latitude": "34",
            "type": "1",
            "property": "1",
            "legalPerson": "tri",
            "tel": "123",
            "orgCode": 1,
          }
        ],
        newList: []
      },
      mounted: function () {
        this.newList = this.list.concat();
      },
      methods: {
        popDialog: function () {
          console.log("clicked")
          $("#dialogDiv").dialog({
            // autoOpen: false,
            modal: true,
            width: 410,
            height: 240,
            title: "弹窗测试",

          })
        },
        addItem: function () {
          //测试: 直接发送 ajax
          $.ajax({
            type: "POST",
            url: "http://192.168.0.239:8080/place/addPlaceInfo",
            dataType: "json",
            data: {
              placeNo: "001",
              placeName: "test",
              address: "sselab",
              longitude: "123.09.32",
              latitude: "1234.34",
              type: "2",
              property: "12",
              fkPoliceOfficeId: "123",
              legalPerson:"",
              certType:"",
              certNo:"",
              tel:"",
              beginTime:"",
              endTime:"",
              orgCode:"",
              checkStatus:""
            },
            // crossDomain: true,
            contentType:"application/json;charset=UTF-8",
            // xhrFields:{
            //   "Access-Control-Allow-Origin":"*"
            // },
            success: function (response) {
              console.log("请求成功：" + JSON.stringify(response))
              if (response.meta.success) {
                console.log("添加成功!")
                vm.list.push({
                  "placeId": 1,
                  "placeName": "新增数据1",
                  "placeNo": "111",
                  "address": "123",
                  "longitude": "12",
                  "latitude": "34",
                  "type": "1",
                  "property": "1",
                  "legalPerson": "tri",
                  "tel": "123",
                  "orgCode": 1,
                })
              }
            }
          })
        },
        queryPlaceinfo: function (condition) {
          console.log("==================================")
          this.list = this.newList.concat();
          console.log("点击事件执行了,请求参数：" + JSON.stringify(condition));

          $.ajax({
            type: "GET",
            url: "http:192.168.0.239:8080/place/searchPlaceInfo",
            dataType: "json",
            data: {
              placeName: vm.queryCondition.placeName,
              placeNo: vm.queryCondition.placeNo,
              address: vm.queryCondition.address,
              type: vm.queryCondition.type,
              property: vm.queryCondition.property,
              legalPerson: vm.queryCondition.legalPerson,
              orgCode: vm.queryCondition.orgCode
            },
            success: function (response) {
              console.log("请求成功，ajax 的success的 response:" + response)
              console.log("stringify:" + JSON.stringify(response))
              console.log("response.data:" + response.data.length)
              vm.list = response.data;
            }
          })
          // 原生 ajax
          // var request = new XMLHttpRequest();
          // request.onreadystatechange = function () {
          //   if (request.readyState === 4) {
          //     if (request.status === 200) {
          //       // 请求成功返回结果
          //       console.log("请求成功");
          //       var re = request.responseText;
          //       console.log('后端返回的数据result类型' + re);
          //       var result = JSON.parse(re);

          //       // console.log("result 数据类型："+typeof result);
          //       console.log("result 中 data 字段 数据："+ result.data )
          //       console.log("result.data 的类型（预期是一个arr）："+ Object.prototype.toString.call(result.data))
          //       try {
          //         for(let i =0;i<result.data.length;i++){
          //           vm.list.push(result.data[i]);
          //         }

          //         console.log("push 成功！")
          //       }catch{
          //         console.log("push 数据 failed！")
          //       }

          //     } else {
          //       console.log("请求失败，状态码：" + request.status)
          //     }
          //   } else {
          //     console.log("请求还在继续")
          //   }
          // };
          // // 参数拼接
          // var parameter = '?' + 'placeName=' + this .queryCondition.placeName + '&' + 'placeNo=' + this.queryCondition.placeNo + '&' + 'address=' + this.queryCondition.address + '&' + 'type=' + this.queryCondition.type + '&' + 'property=' + this.queryCondition.property + '&' + 'legalPerson=' + this.queryCondition.legalPerson + '&' + 'orgCode=' + this.queryCondition.orgCode;
          // console.log('param:' + parameter);

          // var URL = 'http:192.168.0.239:8080/place/searchPlaceInfo'+parameter;
          // console.log('请求的url：' + URL);
          // request.open('GET', URL);
          // console.log('指定请求的URL完毕')
          // request.send();

        }
      }
    })
  </script>

  <!-- ace scripts -->
  <script src="../assets/js/ace/elements.scroller.js"></script>
  <script src="../assets/js/ace/elements.colorpicker.js"></script>
  <script src="../assets/js/ace/elements.fileinput.js"></script>
  <script src="../assets/js/ace/elements.typeahead.js"></script>
  <script src="../assets/js/ace/elements.wysiwyg.js"></script>
  <script src="../assets/js/ace/elements.spinner.js"></script>
  <script src="../assets/js/ace/elements.treeview.js"></script>
  <script src="../assets/js/ace/elements.wizard.js"></script>
  <script src="../assets/js/ace/elements.aside.js"></script>
  <script src="../assets/js/ace/ace.js"></script>
  <script src="../assets/js/ace/ace.ajax-content.js"></script>
  <script src="../assets/js/ace/ace.touch-drag.js"></script>
  <script src="../assets/js/ace/ace.sidebar.js"></script>
  <script src="../assets/js/ace/ace.sidebar-scroll-1.js"></script>
  <script src="../assets/js/ace/ace.submenu-hover.js"></script>
  <script src="../assets/js/ace/ace.widget-box.js"></script>
  <script src="../assets/js/ace/ace.settings.js"></script>
  <script src="../assets/js/ace/ace.settings-rtl.js"></script>
  <script src="../assets/js/ace/ace.settings-skin.js"></script>
  <script src="../assets/js/ace/ace.widget-on-reload.js"></script>
  <script src="../assets/js/ace/ace.searchbox-autocomplete.js"></script>
  <!-- inline scripts related to this page -->
</body>

</html>